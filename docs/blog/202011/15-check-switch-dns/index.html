<!DOCTYPE html>
<html><title>DNSの切り替え待ちで確認すること</title>
<body><div id="content">
<h1>DNSの切り替え待ちで確認すること</h1>
<p>切り替えにかかる時間がちょっと長いな、とおもったときに、確認しておいても良いな、と思ったのでメモ。</p>
<!-- more -->
<h2 id="はじめに">はじめに</h2>
<p>昔はサーバーの切り替えをすると、DNSが浸透するまでに最大72時間くらいかかるから気長に待ちましょう、といわれていた。</p>
<p>ドメインを新しくつくったり、ドメインを別のサーバーに移し替える作業を行うと、ドメインをIPアドレスに変換してくれるDNSサーバーの情報が更新されるのを待たなければならない。</p>
<p>最近はその時間がとても短くて10分、15分で新しいサーバーに紐づけされる。</p>
<p>前回、<a href="http://1o0.jp/blog/202011/14-moving-vercel-github/">VercelからGitHub Pagesにホスト先を移転</a>したが、12時間が経っても切り替えられていないので、さすがにちょっと長いかな、と思った。</p>
<h2 id="check-ip">紐づけされているIPアドレスの確認</h2>
<p><a href="http://www.cman.jp/network/support/ip.html">ドメイン/IPアドレス サーチ 【whois情報検索】</a>にアクセスすると、指定したドメインがどこのIPアドレスに紐づけられているのか確認することができる。</p>
<p>もし、古いサーバーのままであるなら、ただ単にIPアドレスの移行が遅れているだけ、ということになるが、もし、新しいサーバーに切り替わっているなら別の問題が起こっている。</p>
<p>当方のケースでは、VercelのIPアドレスのままだったので、DNSの切り替え中なのか、それとも何かの要因で切り替えられないのか、ということが考えられた。</p>
<h2 id="check-nameserver">ネームサーバーの確認</h2>
<p>Aコードだけ変えて、ネームサーバーがどこになっているか、確認していない、なんてことありませんか？(うちの場合)</p>
<p>CDNを効かせようと思ったとき、ドメインをとったレジストラーからほかに移している、ということがある。</p>
<p>当方のケースで言うと、過去に<a href="https://www.cloudflare.com/ja-jp/">Cloudflare</a>に登録して、そちらにネームサーバーを移行していたのをすっかり忘れていた。</p>
<p>Cloudflareの設定を変えても良かったが、CDNをつかわなくても良いかと思ったので、Cloudflareのネームサーバーからレジストラーの提供しているネームサーバーに変更したところ、30分ほどで切り替えが終了した。</p>
<h2 id="教訓">教訓</h2>
<p>今の御時世、DNSの浸透に最大72時間かかる、というのはもはや都市伝説になっている。</p>
<p>若干、待つ時間と気長さは必要とはいえ、24時間待つのはやりすぎた。</p>
<p>1時間経っても切り替えられていないのなら、何かほかに原因があるのかと疑るべき。</p>
<p>ネームサーバーの変更のし忘れは今後、疑るべきことと学んだ。</p>

<hr>
<ol class="nav navbar-nav"><li><a href="http://1o0.jp/">1o0 Project</a></li>
    <li><a href="http://1o0.jp/blog/">今是記</a></li>
    <li class="active" ><a href="http://1o0.jp/blog/202011/15-check-switch-dns/">DNSの切り替え待ちで確認すること</a></li>
    </ol>

        </div></body>
</html>
